{% extends 'base.html' %}
{% load staticfiles %}
{% block header %}
  {% include 'headers/topbar.html' with section='calendar' %}
  {% include 'headers/mobile.html' %}
{% endblock %}

{% load tz %}

{% block content %}
{% localtime on %}
{% timezone 'America/Vancouver' %}

<main id="calendar" class="u-container">
  <h1>Events</h1>

  {% include './calendar_sidebar.html' %}

  <div class="calendar-container">
    {% for year, months in events_by_date.items %}
    {% ifnotequal year this_year %}
    <div class="calendar-year-label">
      {{ year }}
    </div>
    {% endifnotequal %}
    {% for month, days in months.items %}
    <div class="calendar-month">
      <div class="calendar-month-label">
        {{ month }}
      </div>
      {% for day, events in days.items %}
      <div class="calendar-day-row">
        <div class="calendar-day-label">
          {{ day }}
        </div>
        <div class="calendar-event-list-wrapper">
          <div class="calendar-event-list-container">
          {% for event in events %}
            <div class="calendar-event-container">
            {% include './event_box.html' with event=event hide_datebox=False only %}
            </div>
          {% endfor %}{# event #}
        </div>
        </div>
      </div>
      {% endfor %}{# day #}
    </div>
    {% endfor %}{# month #}
    {% endfor %}{# year #}
  </div>
</main>

{% endtimezone %}
{% endlocaltime %}

{% endblock %}
